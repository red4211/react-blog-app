(window["webpackJsonpblog-app"]=window["webpackJsonpblog-app"]||[]).push([[0],{18:function(t,e,o){t.exports=o(30)},23:function(t,e,o){},24:function(t,e,o){},30:function(t,e,o){"use strict";o.r(e);var n=o(9),a=o(0),s=o.n(a),l=o(11),r=o.n(l),c=(o(23),o(4)),i=o(5),p=o(7),m=o(6),u=o(8),h=(o(24),o(2));function d(t){return{type:"TOGGLEPOST",showFullPost:t}}var f={type:"SETEDITTITLE"};function P(t,e){return{type:"HANDLECHANGE",text:e,name:t}}var b={type:"TOGGLEFORM"};var E=function(t){function e(){var t,o;Object(c.a)(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(o=Object(p.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).handleChange=function(t){var e=t.target.name,n=t.target.value;o.props.dispatch(P(e,n))},o.saveChanges=function(){o.props.dispatch((function(t,e){fetch("https://bloggy-api.herokuapp.com/posts/"+e().fullPost.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e().editPostTitle,body:e().editPostText})}).then(t({type:"TOGGLEEDITPOST"}))}))},o.editPost=function(){o.props.dispatch({type:"TOGGLEEDITPOST"}),o.props.dispatch(f)},o.makeNewComment=function(t){t.preventDefault(),o.props.dispatch((function(t,e){""!==e().commentText&&fetch("https://bloggy-api.herokuapp.com/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e().fullPost.id,body:e().commentText})}).then(t(P("commentText","")))}))},o}return Object(u.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t,e=this;return!0===this.props.showFullPost?(t=this.props.fullPost.comments.map((function(t,e){return s.a.createElement("li",{key:e},t.body)})),!0===this.props.postIsEdited?s.a.createElement("div",{className:"blog-page"},s.a.createElement("button",{onClick:this.props.backToList,className:"back-button"},"Go back"),s.a.createElement("input",{type:"text",value:this.props.editPostTitle,className:"edit-input",name:"editPostTitle",onChange:this.handleChange}),s.a.createElement("input",{type:"text",value:this.props.editPostText,className:"edit-input",name:"editPostText",onChange:this.handleChange}),s.a.createElement("button",{onClick:this.saveChanges,className:"button-margin-r"},"Save changes"),s.a.createElement("button",{onClick:function(){e.props.deletePost(e.props.fullPost.id)}},"Delete Post"),s.a.createElement("p",{className:"comments-title"},"Comments"),s.a.createElement("ul",{className:"comments"},t),s.a.createElement("form",{onSubmit:this.makeNewComment,className:"new-comment-form"},s.a.createElement("textarea",{onChange:this.handleChange,name:"commentText",value:this.props.commentText,className:"comment-textarea"}),s.a.createElement("button",null,"Add comment"))):s.a.createElement("div",{className:"blog-page"},s.a.createElement("button",{onClick:this.props.backToList,className:"back-button"},"Go back"),s.a.createElement("h2",{className:"title"},this.props.fullPost.title," "),s.a.createElement("p",null,this.props.fullPost.body," "),s.a.createElement("button",{onClick:this.editPost,className:"button-margin-r"},"Edit post"),s.a.createElement("button",{onClick:function(){e.props.deletePost(e.props.fullPost.id)}},"Delete Post"),s.a.createElement("p",{className:"comments-title"},"Comments"),s.a.createElement("ul",{className:"comments"},t),s.a.createElement("form",{onSubmit:this.makeNewComment,className:"new-comment-form"},s.a.createElement("textarea",{onChange:this.handleChange,name:"commentText",value:this.props.commentText,className:"comment-textarea"}),s.a.createElement("button",null,"Add comment")))):null}}]),e}(a.Component),T=Object(h.b)((function(t){return{fullPost:t.fullPost,showFullPost:t.showFullPost,editPostTitle:t.editPostTitle,editPostText:t.editPostText,postIsEdited:t.postIsEdited,commentText:t.commentText}}))(E),g=function(t){function e(){var t,o;Object(c.a)(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(o=Object(p.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(a)))).showCreateForm=function(){o.props.dispatch(b)},o.createPost=function(t){t.preventDefault(),o.props.dispatch((function(t,e){0!==e().createPostTitle.length&&0!==e().createPostText.length&&fetch("https://bloggy-api.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e().createPostTitle,body:e().createPostText})}).then(t(b))}))},o.handleChange=function(t){var e=t.target.name,n=t.target.value;o.props.dispatch(P(e,n))},o}return Object(u.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return this.props.showForm?s.a.createElement("div",null,s.a.createElement("button",{onClick:this.showCreateForm,className:"create-post-btn"},"Hide form"),s.a.createElement("form",{onSubmit:this.createPost,className:"new-post-form"},s.a.createElement("label",null,"Title ",s.a.createElement("input",{type:"text",name:"createPostTitle",onChange:this.handleChange,value:this.props.createPostTitle})),s.a.createElement("label",null,"Text ",s.a.createElement("input",{type:"text",name:"createPostText",onChange:this.handleChange,value:this.props.createPostText})),s.a.createElement("button",null,"Submit"))):s.a.createElement("button",{onClick:this.showCreateForm,className:"create-post-btn"},"Create a new post")}}]),e}(a.Component),y=Object(h.b)((function(t){return{createPostText:t.createPostText,createPostTitle:t.createPostTitle,showForm:t.showForm}}))(g),O=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(p.a)(this,Object(m.a)(e).call(this))).displayFullPost=function(e){fetch("https://bloggy-api.herokuapp.com/posts/"+e+"?_embed=comments").then((function(t){return t.json()})).then((function(e){t.setState({showAllPosts:!1}),t.props.dispatch({type:"SETFULLPOST",fullPost:e}),t.props.dispatch(d(!0))}))},t.backToList=function(){t.setState({showAllPosts:!0}),t.props.dispatch(d(!1))},t.deletePost=function(e){fetch("https://bloggy-api.herokuapp.com/posts/"+e,{method:"DELETE"}).then(fetch("https://bloggy-api.herokuapp.com/posts").then((function(t){return t.json()})).then((function(e){t.setState({allPosts:e,showAllPosts:!0}),t.props.dispatch(d(!1))})))},t.handleChange=function(e){var o=e.target.name,a=e.target.value;t.setState(Object(n.a)({},o,a))},t.state={allPosts:[],showAllPosts:!0},t}return Object(u.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("https://bloggy-api.herokuapp.com/posts").then((function(t){return t.json()})).then((function(e){t.setState({allPosts:e})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(v,{blogsList:this.state.allPosts,displayFullPost:this.displayFullPost,showAllPosts:this.state.showAllPosts,handleChange:this.handleChange}),s.a.createElement(T,{backToList:this.backToList,deletePost:this.deletePost}))}}]),e}(a.Component);function v(t){if(!0===t.showAllPosts){var e=t.blogsList.map((function(e,o){return s.a.createElement("div",{key:o,className:"post",onClick:function(){t.displayFullPost(e.id)}},s.a.createElement("h2",{className:"title"},e.title," "),s.a.createElement("p",null,e.body," "))}));return s.a.createElement("div",null,s.a.createElement(y,null),s.a.createElement("div",{className:"all-posts"},e))}return null}var w=Object(h.b)((function(t){return{fullPost:t.fullPost}}))(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=o(10),k=o(17);function j(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function x(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?j(o,!0).forEach((function(e){Object(n.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):j(o).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var N={commentText:"",fullPost:{comments:[]},showFullPost:!1,editPostTitle:"",editPostText:"",createPostText:"",createPostTitle:"",showForm:!1,postIsEdited:!1};var S=Object(C.c)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SETFULLPOST":return x({},t,{fullPost:e.fullPost});case"TOGGLEPOST":return x({},t,{showFullPost:e.showFullPost});case"SETEDITTITLE":return x({},t,{editPostTitle:t.fullPost.title,editPostText:t.fullPost.body});case"HANDLECHANGE":return x({},t,Object(n.a)({},e.name,e.text));case"TOGGLEFORM":return x({},t,{showForm:!t.showForm});case"SHOWEDITPOST":return x({},t,{postIsEdited:!0});case"TOGGLEEDITPOST":return x({},t,{postIsEdited:!t.postIsEdited});default:return t}}),Object(C.a)(k.a));r.a.render(s.a.createElement((function(){return s.a.createElement(h.a,{store:S},s.a.createElement(w,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.d20ebd9a.chunk.js.map